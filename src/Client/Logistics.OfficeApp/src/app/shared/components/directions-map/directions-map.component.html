<mgl-map [accessToken]="accessToken"
  [style]="'mapbox://styles/mapbox/streets-v11'" 
  [zoom]="[zoom]" 
  [center]="center"
  [fitBounds]="bounds!"
  [fitBoundsOptions]="{padding: 50}">
  <mgl-image id="custom-marker"
    url="https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png"
    (imageLoaded)="isImageLoaded = true">
  </mgl-image>
  
  <!-- Route Layer -->
  <mgl-layer *ngIf="route" 
    id="routeLayer" 
    type="line" 
    [source]="route" 
    [paint]="{
      'line-color': '#28a745',
      'line-width': 8
    }">
  </mgl-layer>

  <!-- Start Point Symbol Layer -->
  <mgl-layer *ngIf="startPoint && isImageLoaded"
    id="startPointLayer"
    type="symbol"
    [source]="startPoint"
    [layout]="{
      'icon-image': 'custom-marker'
    }">
  </mgl-layer>

  <!-- End Point Symbol Layer -->
  <mgl-layer *ngIf="endPoint && isImageLoaded"
    id="endPointLayer"
    type="symbol"
    [source]="endPoint"
    [layout]="{
      'icon-image': 'custom-marker'
    }">
  </mgl-layer>
</mgl-map>
