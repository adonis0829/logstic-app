@page "/tenants"
@using Logistics.AdminApp.Utils
@inherits PageBase

<RadzenText TextStyle="TextStyle.H3">Tenants</RadzenText>
<hr/>

<RadzenButton class="mb-3" Click="@(() => Navigation.NavigateTo("/tenants/add"))">Add</RadzenButton>

<RadzenGrid Data="_tenants"
            LoadData="LoadTenants"
            Count="_totalRecords"
            AllowPaging="true"
            AllowSorting="true"
            PageSizeOptions="new[] { 10, 25, 50 }"
            PageSize="10">
    <Columns>
        <RadzenGridColumn TItem="TenantDto"
                          Property="Name"
                          Title="Name">
        </RadzenGridColumn>
        <RadzenGridColumn TItem="TenantDto"
                          Property="CompanyName"
                          Title="Company">
        </RadzenGridColumn>
        <RadzenGridColumn TItem="TenantDto"
                          Property="CompanyAddress"
                          Title="Company Address">
            <Template Context="tenant">
                @AddressUtils.ConvertToString(tenant.CompanyAddress)
            </Template>
        </RadzenGridColumn>
        <RadzenGridColumn TItem="TenantDto"
                          Property="ConnectionString"
                          Title="DB Connection">
        </RadzenGridColumn>
        <RadzenGridColumn TItem="TenantDto"
                          Property="Subscription"
                          Title="Subscription Plan">
            <Template Context="tenant">
                @tenant.Subscription?.Plan.Name
            </Template>
        </RadzenGridColumn>
        <RadzenGridColumn TItem="TenantDto" Title="Action">
            <Template Context="tenant">
                <RadzenButton Click="() => OpenEditPage(tenant)">Edit</RadzenButton>
            </Template>
        </RadzenGridColumn>
    </Columns>
</RadzenGrid>
